var data_sets = {
  'asthma':{
    'All':{
      'tid':'1h_iAYRtvRAsPZ1rCPDZbYwZgtkLZLcB0rT4Uu1Y',
      'table': "https://www.google.com/fusiontables/embedviz?viz=GVIZ&t=TABLE&containerId=gviz_canvas&q=select+col8%3E%3E0%2C+col2%3E%3E0%2C+col3%3E%3E0%2C+col0%3E%3E0%2C+col1%3E%3E0%2C+col6%3E%3E0%2C+col7%3E%3E0%2C+col4%3E%3E0%2C+col5%3E%3E0+from+1h_iAYRtvRAsPZ1rCPDZbYwZgtkLZLcB0rT4Uu1Y",
      'map': 'https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col2%3E%3E1+from+1h_iAYRtvRAsPZ1rCPDZbYwZgtkLZLcB0rT4Uu1Y&h=false&lat=44.3&lng=-121.15&z=6&t=1&l=col2%3E%3E1&y=1&tmplt=-1',
      'chart': '',
      'title':"Hospitalizations: Age-adjusted rate per 10,000 population, both sexes, all counties"
    },
    'Male': {
      'tid':'1jIbJ1cHw3xFw9rAFHz8kr1t82cjHe5mRNdRT5S8',
      'table': "https://www.google.com/fusiontables/embedviz?viz=GVIZ&t=TABLE&containerId=gviz_canvas&q=select+col8%3E%3E0%2C+col2%3E%3E0%2C+col3%3E%3E0%2C+col0%3E%3E0%2C+col1%3E%3E0%2C+col6%3E%3E0%2C+col7%3E%3E0%2C+col4%3E%3E0%2C+col5%3E%3E0+from+1jIbJ1cHw3xFw9rAFHz8kr1t82cjHe5mRNdRT5S8",
      'map': 'https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col2%3E%3E1+from+1jIbJ1cHw3xFw9rAFHz8kr1t82cjHe5mRNdRT5S8&h=false&lat=44.3&lng=-121.15&z=6&t=1&l=col2%3E%3E1&y=1&tmplt=-1',
      'chart': '',
      'title':'Hospitalizations: Age-adjusted rate per 10,000 population, males, all counties'
    },
    'Female': {
      'tid':'1YO3p1kAIUTLxf6KNZDj5jIRHTLvrL12K6UDqF5Y',
      'table': 'https://www.google.com/fusiontables/embedviz?viz=GVIZ&t=TABLE&containerId=gviz_canvas&q=select+col8%3E%3E0%2C+col2%3E%3E0%2C+col3%3E%3E0%2C+col0%3E%3E0%2C+col1%3E%3E0%2C+col6%3E%3E0%2C+col7%3E%3E0%2C+col4%3E%3E0%2C+col5%3E%3E0+from+1YO3p1kAIUTLxf6KNZDj5jIRHTLvrL12K6UDqF5Y',
      'map': 'https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col2%3E%3E1+from+1YO3p1kAIUTLxf6KNZDj5jIRHTLvrL12K6UDqF5Y&h=false&lat=44.3&lng=-121.15&z=6&t=1&l=col2%3E%3E1&y=5&tmplt=-1',
      'chart': "",
      'title':"Hospitalizations: Age-adjusted rate per 10,000 population, females, all counties"
    }
  },
  'cancer':{
    'All':{
      'tid':'1D1UeB774ABrcOxPaOTz4imVHKv94ABGAMFQFdWg',
      'table': 'https://www.google.com/fusiontables/embedviz?viz=GVIZ&t=TABLE&containerId=gviz_canvas&q=select+col11%3E%3E0%2C+col1%3E%3E0%2C+col0%3E%3E0%2C+col3%3E%3E0%2C+col2%3E%3E0%2C+col6%3E%3E0%2C+col7%3E%3E0%2C+col4%3E%3E0%2C+col5%3E%3E0%2C+col9%3E%3E0%2C+col10%3E%3E0%2C+col8%3E%3E0+from+1D1UeB774ABrcOxPaOTz4imVHKv94ABGAMFQFdWg',
      'map': 'https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col2%3E%3E1+from+1D1UeB774ABrcOxPaOTz4imVHKv94ABGAMFQFdWg&h=false&lat=44.3&lng=-121.15&z=6&t=1&l=col2%3E%3E1&y=3&tmplt=-1',
      'chart': '' 
    },
    'Bladder':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Brain & CNS':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Breast':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Breast < 50yr':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Breast >=50yr':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Leukemia':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Leukemia-Lymphocytic':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Leukemia-Myeloid':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Lung & Bronchus':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Melanoma':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Mesotheloma':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    "Non-Hodgkin's Lymphoma":{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    },
    'Thyroid':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    }
  },
  'co':{
    'All':{
      'tid':'',
      'table': '',
      'map': '',
      'chart': ''
    }
  },
  'heart_attack':{
    'All':{
      'tid':'11UAHYoHQ1GYEkSDz8E6Rt406TqN6-AbK-bJdFXs',
      'table': 'https://www.google.com/fusiontables/embedviz?viz=GVIZ&t=TABLE&containerId=gviz_canvas&q=select+col8%3E%3E0%2C+col2%3E%3E0%2C+col3%3E%3E0%2C+col0%3E%3E0%2C+col1%3E%3E0%2C+col4%3E%3E0%2C+col5%3E%3E0%2C+col6%3E%3E0%2C+col7%3E%3E0+from+11UAHYoHQ1GYEkSDz8E6Rt406TqN6-AbK-bJdFXs',
      'map': 'https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col2%3E%3E1+from+11UAHYoHQ1GYEkSDz8E6Rt406TqN6-AbK-bJdFXs&h=false&lat=44.3&lng=-121.15&z=6&t=1&l=col2%3E%3E1&y=2&tmplt=-1',
      'chart': ''
    }
  },
  'reproductive':{
    'All':{
      'tid':'11dJqjaryGor6ErfoDTg4DTJgs42dfZVH-GeF_u4',
      'table': 'https://www.google.com/fusiontables/embedviz?viz=GVIZ&t=TABLE&containerId=gviz_canvas&q=select+col11%3E%3E0%2C+col0%3E%3E0%2C+col2%3E%3E0%2C+col1%3E%3E0%2C+col5%3E%3E0%2C+col6%3E%3E0%2C+col3%3E%3E0%2C+col4%3E%3E0%2C+col9%3E%3E0%2C+col10%3E%3E0%2C+col7%3E%3E0%2C+col8%3E%3E0+from+11dJqjaryGor6ErfoDTg4DTJgs42dfZVH-GeF_u4',
      'map': 'https://www.google.com/fusiontables/embedviz?viz=MAP&q=select+col2%3E%3E1+from+11dJqjaryGor6ErfoDTg4DTJgs42dfZVH-GeF_u4&h=false&lat=44.3&lng=-121.15&z=6&t=1&l=col2%3E%3E1&y=2&tmplt=-1',
      'chart': ''
    }
  }
};

var chartConfig = function(tid,year){
  return "https://www.google.com/fusiontables/embedviz?&containerId=gviz_canvas&viz=GVIZ&q=select%20'Geography'%2C%20'"+year+"'%20from%20"+tid+"%20order%20by%20'"+year+"'%20DESC%20limit%20100&t=BAR&gco_width=500&gco_height=400&gco_chartArea=%7B%22height%22%3A%22350%22%2C%22top%22%3A%2220%22%7D&gco_hAxis=%7B%22viewWindowMode%22%3A%22pretty%22%2C%22viewWindow%22%3A%7B%7D%2C%22useFormatFromData%22%3Atrue%2C%22format%22%3A%22%22%7D&gco_vAxis=%7B%22format%22%3A%22%22%7D&gco_vAxes=%5B%7B%22title%22%3Anull%2C%22minValue%22%3Anull%2C%22maxValue%22%3Anull%2C%22viewWindowMode%22%3A%22pretty%22%2C%22viewWindow%22%3A%7B%22max%22%3Anull%2C%22min%22%3Anull%7D%2C%22useFormatFromData%22%3Atrue%2C%22textStyle%22%3A%7B%22color%22%3A%22%23222%22%2C%22fontSize%22%3A%2208%22%7D%7D%2C%7B%22viewWindowMode%22%3A%22pretty%22%2C%22viewWindow%22%3A%7B%7D%2C%22useFormatFromData%22%3Atrue%7D%5D&gco_curveType=&gco_animation=%7B%22duration%22%3A500%7D&gco_booleanRole=certainty&gco_lineWidth=2&gco_series=%7B%220%22%3A%7B%22hasAnnotations%22%3Atrue%7D%7D&gco_legend=inside&gco_strictFirstColumnType=false"
}


$(document).ready(function(){
  $('#disease_sets').live('change',function(){
    $('#data_sets').children().remove();
    for(var item in data_sets[this.value]){
      $('#data_sets').append('<option value = "'+
        item+'">'+item+'</option>');
    }
    $('#data_sets option[value="All"]').trigger('change');
  });

  $('#data_sets').live('change',function(){
    var disease = $('#disease_sets option:selected').attr('value');
    var dataset = this.value;
    console.log(disease);
    console.log(dataset);
    console.log(data_sets[disease][dataset]);
    $('#map').attr('src',data_sets[disease][dataset]['map']);
    $('#graph').attr('src',chartConfig(data_sets[disease][dataset]['tid'],'2006'));
    $('#table').attr('src',data_sets[disease][dataset]['table']);
    $('#title').text(data_sets[disease][dataset]['title']);
  });

  $('#disease_sets').trigger('change');
});
